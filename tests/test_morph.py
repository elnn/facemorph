#!/usr/bin/env python
import numpy as np
from oct2py import octave

img1 = {
    'path': '8e1f96c6.jpg',
    'points': np.array([[100, 159], [171, 166], [141, 144], [139, 170],
                        [141, 160], [310, 157], [247, 165], [277, 143],
                        [279, 171], [276, 159], [206, 252], [170, 243],
                        [246, 240], [207, 232], [210, 288], [210, 322],
                        [156, 296], [262, 297], [210, 304], [ 85, 125],
                        [178, 132], [235, 131], [333, 126], [223,  17],
                        [213, 393], [ 68, 231], [349, 234], [335,  80],
                        [315, 327], [112, 334], [ 77,  87]], dtype=float)
}

img2 = {
    'path': 'e623a85b.jpg',
    'points': np.array([[107, 170], [170, 178], [141, 156], [136, 181],
                        [140, 167], [295, 173], [233, 177], [267, 158],
                        [267, 183], [257, 170], [202, 266], [164, 248],
                        [234, 249], [201, 244], [200, 291], [198, 333],
                        [156, 305], [238, 307], [198, 310], [100, 139],
                        [172, 140], [229, 146], [301, 142], [212,  27],
                        [195, 381], [ 76, 243], [322, 242], [315,  84],
                        [290, 319], [110, 330], [110,  87]], dtype=float)
}

def test():
    infile1 = img1['path']
    infile2 = img2['path']
    outfile = 'output.jpg'
    points1 = img1['points']
    points2 = img2['points']
    ratio = 0.5
    octave.call('facemorph', infile1, infile2, outfile, points1, points2, ratio)

if __name__ == '__main__':
    test()
